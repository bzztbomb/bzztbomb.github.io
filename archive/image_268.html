Autonomous Vehicle
2008-11-15 20:11:18
msoto

<p>Everything thus far works well with the motor controller, but I have too much weight, so I am going to cut off all unnecessary plastic from the mounting plastic for circuits. Here is what I want to do, but have not idea how to: -I want the vehicle to back up for 2 sec and turn the servo at the same time when the switch is hit. -I also want it to flip the switch back after 2 seconds so that it goes forward. Here is the program I am using:</p>
<p>int switchPin = 2; // switch input int motor1Pin = 3; // H-bridge leg 1 int motor2Pin = 4; // H-bridge leg 2 int speedPin = 9; // H-bridge enable pin int ledPin = 13; //LED</p>
<p>void setup() {</p>
<pre>
 // set the switch as an input:
 pinMode(switchPin, INPUT); 
</pre>
<pre>
 // set all the other pins you're using as outputs:
 pinMode(motor1Pin, OUTPUT); 
 pinMode(motor2Pin, OUTPUT); 
 pinMode(speedPin, OUTPUT);
 pinMode(ledPin, OUTPUT);
</pre>
<pre>
 // set speedPin high so that motor can turn on:
 digitalWrite(speedPin, HIGH); 
</pre>
<pre>
 // blink the LED 3 times. This should happen only once.
 // if you see the LED blink three times, it means that the module
 // reset itself,. probably because the motor caused a brownout
 // or a short.
 blink(ledPin, 3, 100);
</pre>
<p>}</p>
<p>void loop() {</p>
<pre>
 // if the switch is high, motor will turn on one direction:
 if (digitalRead(switchPin) == HIGH) {
   digitalWrite(motor1Pin, LOW);   // set leg 1 of the H-bridge low
   digitalWrite(motor2Pin, HIGH);  // set leg 2 of the H-bridge high
   analogWrite (speedPin, 255);   // slow motor down
 } 
 // if the switch is low, motor will turn in the other direction:
 else {
   digitalWrite(motor1Pin, HIGH);  // set leg 1 of the H-bridge high
   digitalWrite(motor2Pin, LOW);   // set leg 2 of the H-bridge low
 }
</pre>
<p>}</p>
<p>/*</p>
<pre>
 blinks an LED
*/
</pre>
<p>void blink(int whatPin, int howManyTimes, int milliSecs) {</p>
<pre>
 int i = 0;
 for ( i = 0; i &lt; howManyTimes; i++) {
   digitalWrite(whatPin, HIGH);
   delay(milliSecs/2);
   digitalWrite(whatPin, LOW);
   delay(milliSecs/2);
 }
</pre>
<p>}</p>
<p>Any help would be greatly appreciated!</p>
<p><br /></p>

