Developing your Dorkboard+Benito in Ubuntu
2009-05-13 17:24:52
dankreek

<p>I just recently attended the Arduino Cult Induction given by <a rel="nofollow" class="external text" href="/user/feurig">Feurig</a>. Had a great old time inhaling solder fumes and received a cheap arduino development system to boot. I quickly learned, however, that developing Arduino boards with a Benito in Linux is a HUGE pain and doesn't work out of the box for a number of reasons:</p>
<ul>
<li>The Arduino IDE will not find the Benito programmer at its Kernel-given home at /dev/ttyACM0</li>
<li>Java and the AVR tool chain must be installed</li>
<li>Braille TTY must be uninstalled</li>
<li>In Ubuntu 8.10 the AVR tool chain is broken and needs to be updated</li>
<li>The latest Arduino IDE does not come pre-built for 64-bit systems</li>
</ul>
<p><br />
So here are some things you need to do to start developing your Dorkboard in Ubuntu:</p>
<p>First you need to add a new rule to udev so that is correctly names the Benito. Create a new file called 60-benito.rules in /etc/udev/rules.d like so...</p>
<p><code>sudo gedit /etc/udev/rules.d/60-benito.rules</code></p>
<p>and add the following text to it:</p>
<ol>
<li><code>Link the Benito to a standard USB serial device</code></li>
</ol>
<p><code>KERNEL=="ttyACM*", ATTRS{product}=="Benito*", SYMLINK+="ttyUSB%n"</code></p>
<p>Now save the file, and restart the udev daemon</p>
<p><code>sudo /etc/init.d/udev restart</code></p>
<p>and your Benito device will be named properly.</p>
<p>Now we need to remove a conflicting package which Ubunto installs by default:</p>
<p><code>sudo apt-get remove brltty</code></p>
<p>You will need to add some Ubuntu packages which the Arduino IDE relies on to function. In your terminal enter the following command:</p>
<p><code>sudo apt-get install sun-java6-bin sun-java6-jdk avr-libc gcc-avr librxtx-java</code></p>
<p>If you are using Ubuntu 8.10 you are going to need to jump through some extra hoops because the gcc-var compiler has a problem dealing with long ints, and this is a show stopper for us. Luckily for us 9.04 has already been released so we can just grab the upgraded packages from Ubuntu. I initially tried manually downloading and installing these packages, but it broke apt, so just use the following steps, which I got from Arduino's website:</p>
<p><code>1. $sudo gedit /etc/apt/sources.list 2. add the following line: deb <a rel="nofollow" class="external free" href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a> jaunty main restricted universe multiverse 3. $sudo apt-get update 4. Then update gcc-avr and avr-libc from Synapitic Package Manager 5. remove comment the line added to sources.list by adding a leading # 6. $sudo apt-get update</code></p>
<p>Finally, you will need the Arduino IDE to start developing your Dorkboard. Go to <a rel="nofollow" class="external autonumber" href="http://www.arduino.cc/en/Main/Software">[1]</a> and get the latest Arudino IDE. As of this writing version 0015 is the newest. If you're on a 32 bit machine, GREAT! Otherwise just grab the 32 bit software anyway, we can just update a file to work on 64 bit machines. To do this untar the arudino tarball wherever you want, then open up a terminal, cd to the arduino-0015 directory and enter the following commands:</p>
<p><code>rm lib/librxtxSerial.so ln -s /usr/lib/librxtxSerial.so lib/</code></p>
<p>You should now be able to run the arduino script in the arduino-0015 dir without any problems. PLEASE post replies if these instructions don't work you your Ubuntu system!</p>
<p>Happy hacking!</p>

