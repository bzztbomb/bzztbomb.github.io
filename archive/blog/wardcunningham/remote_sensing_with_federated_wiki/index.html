<p>A good architectural test for any protocol is to squeeze it into an under powered computer like an Arduino. For this and a few more reasons I've latched on to a project to publish field data from the Nike Community Garden as part of my work on the "Smallest Federated Wiki" (<a href='http://wardcunningham.github.com'>project videos</a>).</p><p>Russell Senior helped by rummaging together enough radio gear to provide WiFi. Here's his install on the roof of a friendly neighbor with the garden in the distance.</p><p><img alt='img' src='http://dorkbotpdx.org/files/images/IMG_1886.preview.JPG'/></p><p>Coding the server proved extra challenging due to limited literal text space. I solved that by including several custom DSL's, one for HTML and another for JSON. With them I can assemble full pages from short text fragments that are reused in numerous places (See <a rel="nofollow" class="external text" href="https://github.com/WardCunningham/Smallest-Federated-Wiki/blob/master/server/Wikiduino/Wikiduino.ino">code</a>). Here is the loop that reports discovered one-wire thermometers:</p><p><code>for (int ch=0; ch&lt;num(temp); ch++) {</code></p><pre><code> if (temp[ch].code == 0) {break;} sh();   k("type"); v("chart");   k("id"); v((long)temp[ch].code);   k("caption"); v("Fahrenheit");   k("data");     sa();       v(1314306006L);        v(temp[ch].data * (9.0F/5/16) + 32);     ea(); eh();</code></pre><p><code>}</code></p><p>This DSL uses K for keys, V for values, SH and EH to start and end a hash, and, SA and EA to do the same for arrays. You can spot the centigrade to Fahrenheit conversion where an extra divide by 16 shows up because the DS18B20 reports in 1/16ths of a degree C.</p><p>See also <a href="/w/index.php?title=Wikiduino_Deployed&amp;action=edit&amp;redlink=1" class="new" title="Wikiduino Deployed (page does not exist)">Wikiduino Deployed</a>.</p>
