Accel-only breakout board (working)
2010-06-13 10:10:39
paul

Boards from Laen's PCB group order arrived today, and I'm happy to say the Accel-only breakout board works.  This was inspired by <a href="/blog/scott_d/inexpensive_accelerometer_and_breakout_board_design">Sott's design</a>, but with support for 5 volts, and using I2C.

<img src="/files/images/accel.jpg">

I'll have 4 more kits at the next Monday meetup.  The kit has all parts except the MMA7455 chip, and the kit's FREE if you build it or wreck it trying.  So far, I've only written a tiny test program.  Here's the code:

<pre>
#include&nbsp;&lt;<span style="color: #CC6600;">Wire</span>.h&gt;


<span style="color: #CC6600;">void</span> <span style="color: #CC6600;"><b>setup</b></span>() {
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">begin</span>(38400);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">begin</span>();
&nbsp;&nbsp;<span style="color: #CC6600;">delay</span>(500);
&nbsp;&nbsp;
&nbsp;&nbsp;<span style="color: #7E7E7E;">// enter measurement mode</span>
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">beginTransmission</span>(29);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">send</span>(22);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">send</span>(5);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">endTransmission</span>();
}

<span style="color: #CC6600;">void</span> <span style="color: #CC6600;"><b>loop</b></span>() {
&nbsp;&nbsp;<span style="color: #CC6600;">signed</span> <span style="color: #CC6600;">char</span> x, y, z;
&nbsp;&nbsp;
&nbsp;&nbsp;<span style="color: #CC6600;">delay</span>(100);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">beginTransmission</span>(29);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">send</span>(6);
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">endTransmission</span>();
&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">requestFrom</span>(29, 3);
&nbsp;&nbsp;<span style="color: #CC6600;">while</span> (!<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">available</span>()) <span style="color: #7E7E7E;">/* wait */</span> ;
&nbsp;&nbsp;x&nbsp;=&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">receive</span>();
&nbsp;&nbsp;<span style="color: #CC6600;">while</span> (!<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">available</span>()) <span style="color: #7E7E7E;">/* wait */</span> ;
&nbsp;&nbsp;y&nbsp;=&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">receive</span>();
&nbsp;&nbsp;<span style="color: #CC6600;">while</span> (!<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">available</span>()) <span style="color: #7E7E7E;">/* wait */</span> ;
&nbsp;&nbsp;z&nbsp;=&nbsp;&nbsp;<span style="color: #CC6600;">Wire</span>.<span style="color: #CC6600;">receive</span>();
&nbsp;&nbsp;
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">print</span>(<span style="color: #006699;">&quot;x = &quot;</span>);
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">print</span>((<span style="color: #CC6600;">int</span>)x);
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">print</span>(<span style="color: #006699;">&quot;, y = &quot;</span>);
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">print</span>((<span style="color: #CC6600;">int</span>)y);
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">print</span>(<span style="color: #006699;">&quot;, z = &quot;</span>);
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">print</span>((<span style="color: #CC6600;">int</span>)z);
&nbsp;&nbsp;<span style="color: #CC6600;"><b>Serial</b></span>.<span style="color: #CC6600;">println</span>();
&nbsp;&nbsp;<span style="color: #CC6600;">delay</span>(200);
&nbsp;&nbsp;
}

</pre>

Obviously there's quite a lot more that can be done with the code, but at least this prints raw numbers and they clearly do change if you move the board around, or tilt it on axis.  Clearly quite a lot more software work is needed to turn the raw acceleration numbers into useful X, Y, Z displacement and/or tilt angles.