Sculpting Virtual Clay with the Leap
2013-02-18 14:10:04
zkarcher

<p>Here's something fun! <a href="https://twitter.com/soycamo" title="soycamo @ Twitter">@soycamo</a>&nbsp;and I performed at <a href="/wiki/open_mic_surgery_2012_12_17">DorkbotPDX's Open Mic Surgery</a>. She brought the beats, I brought the visuals.</p><p><a href="http://zacharcher.com/lab/2012/leap_clay/red_clay.png" style="width:640px; height:494px;"><img alt="" class="aligncenter" height="494" src="http://zacharcher.com/lab/2012/leap_clay/red_clay.png" width="640"></a></p><p><a href="http://pureimagination.smugmug.com/Events/Dorkbot-Night/27227254_qB8qCr#!i=2287484261&amp;k=Z9MxTbM">Watch a video of our performance.</a></p><p>I was lucky enough to receive a&nbsp;<a href="https://www.leapmotion.com/">Leap Motion Controller</a>. It acts like a short-range Kinect for your hands, tracking the position of each individual finger. The Leap's sensors are fast, and spookily accurate. I love it.</p><p><!--break--></p><p>For my first "real" Leap project, I planned to use the device on stage, and sculpt a block of virtual clay. Initially I was targeting Flash + Stage3D (<em>aka</em> OpenGL), using a Python script to grab the Leap data and send it to Flash through a socket.</p><p>In the end, I switched to Cinder, on the assumption that its performance would be superior. In retrospect, Flash + Stage3D would have performed fine. Even in Cinder, my laptop only managed 15-20 FPS. Instead of switching to the native C++ Leap library, I kept the (slower?) Python socket, which may have been unwise. It was also my first Cinder project, so progress was slow.</p><p>Still, I regret nothing!!! The performance was a blast. A momentary "ooooohhh" passed through the crowd when they saw the Leap in action. I was concerned about stage lights interfering with the Leap's sensors, but the Leap was unaffected by the lights.</p><p><a href="http://zacharcher.com/lab/2012/leap_clay/fbi_warning.png" style="width:640px; height:494px;"><img alt="" class="aligncenter" height="494" src="http://zacharcher.com/lab/2012/leap_clay/fbi_warning.png" width="640"></a> <a href="http://zacharcher.com/lab/2012/leap_clay/derpy_hooves.png" style="width:640px; height:494px;"><img alt="" class="aligncenter" height="494" src="http://zacharcher.com/lab/2012/leap_clay/derpy_hooves.png" width="640"></a></p><p>For the surface of the clay, I'm storing a <a href="http://en.wikipedia.org/wiki/Heightmap">heightmap</a> in memory. I treat the tips of the fingers as spheres. When the spheres move below the heightmap, some of the height is distributed to neighboring cells. Then the clay is drawn as a triangle mesh. Overall, the effect is a bit rough, but it definitely conveys the feeling of sculpting solid material.</p><p><a href="http://zacharcher.com/lab/2012/leap_clay/shader_error.png" style="width:640px; height:494px;"><img alt="" class="aligncenter" height="494" src="http://zacharcher.com/lab/2012/leap_clay/shader_error.png" width="640"></a> <a href="http://zacharcher.com/lab/2012/leap_clay/i_am_the_bat.png" style="width:640px; height:494px;"><img alt="" class="aligncenter" height="494" src="http://zacharcher.com/lab/2012/leap_clay/i_am_the_bat.png" width="640"></a> <a href="http://zacharcher.com/lab/2012/leap_clay/cracked.png" style="width:640px; height:494px;"><img alt="" class="aligncenter" height="494" src="http://zacharcher.com/lab/2012/leap_clay/cracked.png" width="640"></a></p><p><a href="http://zacharcher.com/lab/2012/leap_clay/leap_clay_public.zip">Download the source code</a>. I included a few sample images and videos to get things rolling:</p><ol><li>Copy the Leap Python SDK files to the <em>/python</em> folder. (Unfortunately, I cannot provide these files. Registered Leap developers can download them from <a href="https://developer.leapmotion.com/">the Leap website.</a>)</li><li><span style="line-height: 15px;">Start the Python server: <em>./python/server.py</em></span></li><li>Open and run the project in Xcode: <em>xcode/Clay.xcodeproj</em></li><li>Keys: <strong>1</strong> starts the next background video, <strong>`</strong> stops all video. <strong>2</strong>&nbsp;toggles silly matrix transforms. <strong>3</strong> toggles liquid mode. <strong>4</strong> resets the surface of the clay. <strong>0</strong> selects a random image, <strong>[</strong> and <strong>]</strong> display the prev/next image.</li></ol><p>[<a href="http://blog.zacharcher.com/2013/02/13/sculpting-virtual-clay-with-the-leap/">Cross-posted to my blog!</a>]</p>