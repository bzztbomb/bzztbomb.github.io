These Lights Were Made for Blinkin'
2010-07-12 07:33:26
WardCunningham

    <p>Paul has built some nifty demo boards for Teensy and Teensy++ computers that have an LED and push button for every available pin. After struggling through an obscure USB bug, I'm proud to say that I've got these lights a blinkin'.</p>

<object width="400" height="300"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=13269669&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1" /><embed src="http://vimeo.com/moogaloop.swf?clip_id=13269669&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="400" height="300"></embed></object><p><a href="http://vimeo.com/13269669">Txtzyme Teensy Demo</a> from <a href="http://vimeo.com/user4249751">Ward Cunningham</a> on <a href="http://vimeo.com">Vimeo</a>.</p>


<p>My laptop orchestrates this performance. I launch the sequencer script with this open-ended shell command which forks as many processes as I have demo boards:</p>

<dl>
        <dd>for i in /dev/cu.usbmodem*; do (perl sequence.pl $i &amp;); done</dd>
</dl>

<p>The sequence.pl script uses a new Txtzyme command, <em>v</em> for version, to sense which flavor of Teensy its talking to and then sets up appropriate arrays of pin numbers for the various effects.</p>

<p>Here is an effect I call <em>Twinkle</em>:</p>

<dl>
        <dd>putz shuffle(map("$_ 1o 8m",@all), map("$_ 0o 8m",@all));</dd>
</dl>

<p>This uses map to create Txtzyme code to turn on and turn off all of the pins. Each operation is in a short string, something like "6d 1o 8m", which outputs 1 to one pin and then pauses 8 milliseconds. Before I send the mapped collections to the Teensy, I shuffle them together with the handy perl library shuffle routine.</p>

<p>As always, I've pushed this up to a Txtzyme <a href="http://github.com/WardCunningham/Txtzyme/tree/master/projects/demo/">project page</a> on GitHub.</p>
