<head>
  <title>VS1053 Troubleshooting</title>
  <link rel="stylesheet" href="/css/archive.css">
</head>

<body>
  <div id="db-header"></div>
  <h1 class="db-page-header">VS1053 Troubleshooting</h1>
  <h2 class="db-page-header">By: paul</h2>
  <h3 class="db-page-header">2014-12-12 09:30:36</h3>

  <div id="db-content">
    <p>Last night, I looked into why Adafruit's VS1053 only works with Teensy 3.1 at 24 MHz, but not 48, 72 or 96 MHz.</p><p><img alt="" src="/files/images/vs1053.jpg" style="width: 720px; height: 576px;"></p><p>Turns out, the library <a href="http://forums.adafruit.com/viewtopic.php?f=19&amp;t=62219&amp;p=328449&amp;hilit=teensy#p328449">depends SD.begin() to reconfiguring SPI</a>.&nbsp; It also <a href="http://forums.adafruit.com/viewtopic.php?f=19&amp;t=62219&amp;p=328449&amp;hilit=teensy#p328449">runs data transfer code from both main program &amp; interrupt context</a> (causing havoc if the interrupt occurs at the wrong moment).&nbsp; Pretty amazing it's worked on AVR for so long, but apparently it <a href="https://github.com/adafruit/Adafruit_VS1053_Library/issues/4">does crash sometimes</a>.&nbsp; Faster processors increase the opportunity for the problem to strike.</p><p>Hopefully my <a href="https://github.com/PaulStoffregen/Adafruit_VS1053_Library">edits from last night</a> will fix these problems for good.</p><p><!--break--></p><p>&nbsp;</p>
  </div>

  <div id="db-back-to-index">
    <a href="/archive/index.html">Back to archive index</a>
  </div>
</body>
