<p>The Dorkbot booth at Maker Faire worked out really well.&nbsp; Here's a couple good photos Zach took:</p><p><img alt="" src="http://dorkbotpdx.org/files/images/mf2013_7.jpg" style="width: 640px; height: 524px;"></p><p>This is the right-hand side, with my extremely bright OctoWS2811 Arduino library demo triggered by stomp pads.</p><p><img alt="" src="http://dorkbotpdx.org/files/images/mf2013_8.jpg" style="width: 640px; height: 535px;"></p><p>This is the center with Tom's Bee counter, Zach's Hypnolamp, and Tara's soldering demo in the center, viewed over the top of Jared's VFD display spectrum analyzer (and FPGA Robotron not visisble in this photo).</p><p>Click "Read more" for more pictures, source code and other stuff</p><p><!--break--></p><p>During the Faire, Jason Kridner from Texas Instruments came by to see my use of the new Beaglebone Black.&nbsp; He recorded this quick video interview about the project, and posted in on <a href="http://beagleboard.blogspot.com/2013/05/beaglebone-black-was-huge-hit-at-maker.html">his blog</a>.</p><p>http://www.youtube.com/watch?v=d-Vbtg_6yRg</p><p><object height="360" width="640"><param name="movie" value="http://www.youtube-nocookie.com/v/d-Vbtg_6yRg?hl=en_US&amp;version=3&amp;rel=0"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"><embed allowfullscreen="true" allowscriptaccess="always" src="http://www.youtube-nocookie.com/v/d-Vbtg_6yRg?hl=en_US&amp;version=3&amp;rel=0" type="application/x-shockwave-flash" height="360" width="640"></object></p><p>&nbsp;</p><p>&nbsp;</p><h3>Getting things ready for the DorkbotPDX exhibit at Maker Faire.....</h3><p>&nbsp;</p><p>(everything below this point was written a few days before Maker Faire)</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_1.jpg" style="width: 640px; height: 602px;"></p><p>&nbsp;</p><p>I originally published the <a href="http://www.pjrc.com/teensy/td_libs_OctoWS2811.html">OctoWS2811 library</a> in February with an example that <a href="http://www.youtube.com/watch?v=M5XQLvFPcBM">plays video</a> using a program written in the Processing environment.</p><p>&nbsp;</p><p>For this project, I decided to attempt streaming live video and also overlaying animated GIF images triggered by user input.&nbsp; Originally I had planned to use Processing again, but with the Beaglebone Black was released, I couldn't resist the opportunity to make it run on such a tiny little Linux board.</p><p>Here's a block diagram of the system.&nbsp; It's from the printed handout (PDF in the files below) I'll have for people at Maker Faire.</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_diagram.gif" style="width: 640px; height: 294px;"></p><p>The Beaglebone runs this project easily, using about 30% CPU while the video is streaming and GIF files are triggered.&nbsp; I used the efficient video4linux API, via the v4l2 library (which is installed by default on Beaglebone's Angstrom Linux distribution).</p><p>I also used libudev to detect the attach and remove events for the webcam and the USB virtual serial devices from the Teensy boards.&nbsp; Each board implements a very simple identification query/response, so when udev detects each serial device, it sends the query and parses the response.&nbsp; This completely avoids hard-coding any device names.&nbsp; The complete source code is available below, for anyone who wants to use this technique.</p><p>Not all has been perfect with Beaglebone.&nbsp; The main problem has been its poor detection of USB devices connected to its host port.&nbsp; This <a href="https://groups.google.com/d/msg/beagleboard/yQvfp1y9DSI/Z77lhjaF4n8J">post about a musb bug</a> was the best info I found.</p><p style="margin-left: 40px;">Leave your usb hub connected with at-least one device plugged in at<br>ALL times from the moment you powered it up..</p><p>However, this wasn't the only issue.&nbsp; The Beaglebone Black just can't see some hubs reliably.&nbsp; Here you can see a bracket I built for a smaller hub which works great on 2 PCs and 1 Mac I tested, but the Beaglebone Black almost never detects it (as if nothing were plugged into its host port).&nbsp; But it can use this somewhat-larger hub (so now I need to make an bigger mounting bracket).&nbsp; I'm hopeful future Beaglebones will ship with this problem fixed, but it is something to consider for anyone attempting these sorts of projects using the USB host port.</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_2.jpg" style="width: 640px; height: 616px;"></p><p>I should mention I also tried using a Raspberry Pi.&nbsp; The uvcvideo driver (for the webcam) exists and works on the Pi, but it drops most of the frames.&nbsp; The resulting frame rate is only a few per second.&nbsp; It's utterly unusable.&nbsp; I found numerous threads where people had similar issues on the Pi, without solutions, other than anticipating the native camera.&nbsp; I found discussions saying some older versions might have a better driver, but I tried several and all were terrible.</p><p>On Beaglebone, this Logitech 9000 webcam works great with uvcvideo.&nbsp; The default Angstrom Linux doesn't have the driver, but it's a simple matter to add it with "opkg install kernel-module-uvcvideo_2.6.39-r102o.9_beagleboard.ipk".&nbsp; I found this on their website, and I'll attach the file to this message, just in case.</p><p>The LEDs are the same 1920 array (60 by 32) I used previously for developing OctoWS2811.&nbsp; I cut them out of the rubber tubing, because they run pretty hot for indoor use inside those tubes.</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_3.jpg" style="width: 640px; height: 485px;"></p><p>Of the 1920 LEDs I purchased from Ray Wu on Aliexpress, 5 have died.&nbsp; Originally it was only 1 dead pixel and 2 more that would stop working after an hour or two of use.&nbsp; Here you can see one of the LEDs which was replaced.&nbsp; I hoping no more die at Maker Faire, but if they do I'll be prepared to cut them out and solder in repacement.</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_4.jpg" style="width: 520px; height: 406px;"></p><p>Here are the stomp sensors.&nbsp; They're just Piezeoelectric speakers, Murata <a href="http://www.mouser.com/ProductDetail/Murata/7BB-27-4L0/?qs=%2fha2pyFadugjTsf0OkYQyIo06XqGhEelzBXeBPCDRV8%3d">7BB-27-4L0</a>, taped and glued to cardboard and placed under <a href="http://www.softtiles.com/index.php?option=com_virtuemart&amp;Itemid=113">Soft Tiles</a> foam mat material.</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_5.jpg" style="width: 640px; height: 376px;"></p><p>The sensors are connected to an interface board that converts the analog voltage to digital signals using <a href="http://www.ti.com/product/lmv393">LMV393 voltage comparators</a>.&nbsp; The Arduino <a href="http://arduino.cc/en/Reference/AttachInterrupt">attachInterrupt() function</a> is used to respond to the rising edges.&nbsp; Teensy 3.0 supports attachInterrupt on all digital pins, so it's easy to connect lots of sensors to just 1 board.&nbsp; There's a brief timeout after sending any output where additional triggers are ignored.&nbsp; That helps prevent vibration from triggering the nearby pads.&nbsp; The complete source code is available below in the attached files.</p><p><img alt="" src="http://www.dorkbotpdx.org/files/images/mf2013_6.jpg" style="width: 640px; height: 345px;"></p><p>&nbsp;</p><p>That's about it for now.&nbsp; I have a long list of stuff to do before hitting the road tomorrow for San Mateo (including making a new bracket for the BB+Hub).&nbsp; But the project is working pretty well.... well enough I can spend a bit of time updating this blog.</p><p>&nbsp;</p><p>EDIT: the files originally attached to this post seem to have been lost during server or software updates.   I have uploaded all the original code at this github repository:</p><p><a href="https://github.com/PaulStoffregen/MakerFaire2013">https://github.com/PaulStoffregen/MakerFaire2013</a></p>
