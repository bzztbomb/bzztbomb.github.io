Battery Pack Load
2013-11-05 11:45:16
paul

<p>I purchased a cheap USB power pack, thinking it would be ideal for powering small projects.&nbsp; But it automatically shuts off if the device isn't drawing a lot of power, since it's meant for charging cell phones.</p><p>Here's a 2 transistor circuit I built this morning that <strong>keeps it on with very little battery drain</strong> by using brief pulses.</p><p><img alt="" src="/files/images/battery_load_pulser6.jpg" style="width: 640px; height: 450px;"></p><p>Click "Read more" for the schematic, design details, and a PCB.....</p><p><!--break--></p><p>I wish I would have thought of this idea, but it came from <a href="http://forum.pjrc.com/threads/24476-Portable-Power-Supply?p=37126&amp;viewfull=1#post37126">this forum post by "Jp3141"</a>.&nbsp; The battery pack automatically turns off if it doesn't see a high current draw.&nbsp; But drawing a high current for only a breif time is enough to keep its internal timer going.</p><p>First, I did some experimenting and found a 22 ohm resistor keeps the power on indefinitely.&nbsp; A 27 ohm resistor kept it on for 19 seconds.&nbsp; With no load, it stays on for only 13 seconds.&nbsp; So a 22 ohm load it is!</p><p>Just connecting a 22 ohm resistor to the 5 volt power is a pretty heavy load that would drain the battery.&nbsp; A 22 ohm resistor also burns about 1.1 watts, so it gets HOT.&nbsp; But the load doesn't need to be on most of the time.&nbsp; The next step was connecting a Teensy and transistor circuit to turn on the load under software control.</p><p><img alt="" src="/files/images/battery_load_pulser7.jpg" style="width: 640px; height: 450px;"></p><p>Here the 5V pin drives a LED in series with a NPN base-emitter junction, to apply about 2.3 volts to a 10 ohm resistor.&nbsp; Of course, the NPN transistor has high current gain, so most of the 230 mA that flows through the 10 ohm resistor comes from the battery through the collector.</p><p>A little experimenting determined pretty quickly that pulses in the 8 to 10 ms range usually keep the battery pack on, but it sometimes turns off after a couple minutes.&nbsp; 20 ms seems very stable.</p><p>Knowing 20 ms is needed, I switched from using the Teensy++ to this simple 2 transistor oscillator:</p><p><img alt="" src="/files/images/battery_load_pulser3.jpg" style="width: 480px; height: 374px;"></p><p>A quick napkin calculation seemed to suggest this would need a really large capacitor.&nbsp; But with a little fiddling, it turned out 22 uF was enough.&nbsp; This circuit creates a pulse slight over 20 ms appoximately every 1.4 seconds.</p><p>Here's another close-up of the circuit on the breadboard.&nbsp; Just 2 transistors, 1 capacitor, and 2 resistors.</p><p><img alt="" src="/files/images/battery_load_pulser9.jpg" style="width: 498px; height: 385px;"></p><p>&nbsp;</p><p>I let this run for about half an hour, with the battery pack happily remaining on the whole time.</p><p>&nbsp;</p><h2><strong>The average battery current is approx 3.5 mA.</strong></h2><p>While the transitors are on, the current is approx 222 mA (4.9V on 22 ohms).&nbsp; But the duty cycle is about 1.6%.</p><p>Of course, inside the pack, a switching power supply is running to step up the batteries from 3.7 to 5 volts, and it's powering those 4 blue LEDs.&nbsp; The internal stuff inside the pack probably wastes a lot more than only 3.5 mA.</p><p>&nbsp;</p><p>Of course, then I did a quick PCB layout.&nbsp; I added a switch in series with the 100K resistor, so it can be left plugged in and turned off to allow the battery pack to shut itself off.&nbsp; It's a tiny board, only about the size of the USB connector itself.</p><p><img alt="" src="/files/images/battery_load_pulser4.jpg" style="width: 640px; height: 333px;"></p><p>I sent the files in to OSH Park.&nbsp; Here's their preview.</p><p><img alt="" src="/files/images/battery_load_pulser8.jpg" style="width: 400px; height: 224px;"></p><p>Here's the board on their site, if anyone else wants to build this:</p><p><a href="http://oshpark.com/shared_projects/Da8m8oAz">http://oshpark.com/shared_projects/Da8m8oAz</a></p><p>The 5 parts are on the bottom side of the PCB.&nbsp; Here's a placement diagram:</p><p><img alt="" src="/files/images/battery_load_pulser5.jpg" style="width: 576px; height: 551px;"></p><p>Here's a list of part numbers:</p><p>&nbsp;</p><p>1276-5649-1-ND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 22 ohm resistor, 1/4 watt<br>490-1719-1-ND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 22 uF capacitor, X5R, 6.3V<br>RMCF0603FT100KCT-ND&nbsp;&nbsp; 100K resistor<br>MMBT2222A-FDICT-ND&nbsp;&nbsp;&nbsp; NPN Transistor<br>MMBT3906-FDICT-ND&nbsp;&nbsp;&nbsp;&nbsp; PNP Transistor<br>WM17118-ND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; USB Connector<br>EG1941-ND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Switch<br>&nbsp;</p><p>If you need to tune the timing for a different battery pack, increasing the capacitor makes the pulse wider and lengthens the time between pulses.&nbsp; Decreasing the 100K resistor makes the pulse occur more frequently, without changing the width of the pulse.</p><p>&nbsp;</p><p><img alt="" src="/files/images/batteryload.jpg" style="width: 640px; height: 490px;"></p><p><br>EDIT: my battery pack turned off a couple times times after many minutes.&nbsp; I increased the capacitor to 47 uF and it ran for an hour.&nbsp; 22 uF might be a little on the low side?&nbsp; If you build this circuit, a little tweaking on the capacitor or resistor values might be needed if your battery pack is different.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>