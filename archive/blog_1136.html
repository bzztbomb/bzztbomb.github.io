Standalone SPI 7-Segment Display
2014-07-26 10:03:47
spacewrench

<p><a href="http://dorkbotpdx.org/node/1134"><img alt="" src="http://dorkbotpdx.org/files/images/7seg-front.preview.jpg" style="width: 120px; height: 160px; float: left; border-width: 0px; border-style: solid; margin-left: 10px; margin-right: 10px;"></a>I had some spare<a href="https://www.sparkfun.com/products/11441" target="_blank"> 4-digit 7-segment LED displays</a> and some AT90USB82s, and I'd always intended to do something with them. &nbsp;This was probably the easiest thing! &nbsp;It's just the AT90 driving the display, with a(t least) 4 wires controlling it: Vcc, GND, MOSI and SCK. &nbsp;(<strike>I haven't written the code yet, but my plan is to make</strike> the display accept<u>s</u> characters via SPI and then spend<u>s</u> the rest of the time displaying them).</p><p><!--break--></p><p><a href="https://oshpark.com/shared_projects/pYlcajy6" target="_blank">The board</a> has footprints for a 16MHz crystal and USB connector, so you could make it a USB-enabled 7-segment display as well. &nbsp;I stuffed those parts on my test board, but I'm not sure whether the USB actually works. &nbsp;You can power the display from USB, at least, although <a href="http://youtu.be/48C9FFhIM-E" onclick="window.open(this.href, '', 'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=no'); return false;">the video</a> shows it being powered over SPI (which is the same connection I use to flash code).</p><p><a href="http://dorkbotpdx.org/node/1135"><img alt="" src="http://dorkbotpdx.org/files/images/7seg-back.preview.jpg" style="width: 120px; height: 160px; float: right; margin-left: 10px; margin-right: 10px;"></a>(Some time passes...)</p><p>Ha!&nbsp; It turns out Paul's code for Teensy USB Serial (AT90USB1286) runs on the AT90USB82 also.&nbsp; So I just plugged it in, and now the 7-Seg display shows up as a serial port.&nbsp; When you type digits, it scrolls them in from the right.&nbsp; Next up: escape codes to control brightness, dots, colon and apostrophe.&nbsp; Plus I have to add characters (I only have hex digits now).&nbsp; Hee hee, this was almost too easy!</p><p>(More time passes...)</p><p>The SPI code was really easy too.&nbsp; I spent more time writing a test driver for an ATtiny13A than I did configuring &amp; enabling the AT90USB82 SPI.&nbsp; There's just a few things you have to set up for slave mode, then you just look in the data register to see if anything arrived.&nbsp; Easy peasy.</p>